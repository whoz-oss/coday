<h2 mat-dialog-title class="dialog-header">
  @if (currentView === 'form') {
    <button matButton (click)="onFormCancel()" title="Back to list" class="back-button">
      <mat-icon>arrow_back</mat-icon>
      Back
    </button>
  }
  <span class="dialog-title">{{ getTitle() }}</span>
  <button mat-icon-button (click)="onCloseClick()" title="Close" class="close-button">
    <mat-icon>close</mat-icon>
  </button>
</h2>

<mat-dialog-content>
  <!-- Success Message -->
  @if (successMessage) {
    <div class="success-message">✅ {{ successMessage }}</div>
  }

  <!-- Error Message (global) -->
  @if (errorMessage && currentView === 'list') {
    <div class="error-message">❌ {{ errorMessage }}</div>
  }

  <!-- List View -->
  @if (currentView === 'list') {
    <app-webhook-list
      [webhooks]="webhooks"
      [isLoading]="isLoading"
      [errorMessage]="errorMessage"
      (create)="onCreateClick()"
      (edit)="onEditClick($event)"
      (deleteWebhook)="onDeleteClick($event)"
      (copyUrl)="onCopyUrl($event)"
    ></app-webhook-list>
  }

  <!-- Form View -->
  @if (currentView === 'form') {
    <app-webhook-form
      [webhook]="editingWebhook"
      [isSaving]="isSaving"
      [availableProjects]="[]"
      (save)="onFormSave($event)"
      (cancelForm)="onFormCancel()"
    ></app-webhook-form>
  }
</mat-dialog-content>
