@if (isOpen) {
  <div class="json-editor-overlay" (click)="onCancel()" (keyup.escape)="onCancel()" tabindex="0" role="dialog" aria-modal="true" aria-label="JSON Editor">
    <div class="json-editor-modal" (click)="$event.stopPropagation()" (keydown.enter)="$event.stopPropagation()" tabindex="-1">
    <!-- Header -->
    <div class="editor-header">
      <h2>{{ getTitle() }}</h2>
      <button class="close-btn" (click)="onCancel()" title="Close">✕</button>
    </div>

      <!-- Loading State -->
      @if (isLoading) {
        <div class="loading-state">
          <div class="spinner"></div>
          <p>Loading configuration...</p>
        </div>
      }

      <!-- Editor Content -->
      @if (!isLoading) {
        <div class="editor-content">
      <textarea
        [(ngModel)]="jsonContent"
        class="json-textarea"
        spellcheck="false"
        placeholder="Enter JSON configuration..."
      ></textarea>

          <!-- Messages -->
          <div class="messages">
            @if (errorMessage) {
              <div class="error-message">
                ❌ {{ errorMessage }}
              </div>
            }
            <!-- Success message removed - handled by parent component -->
          </div>

          <!-- Actions -->
          <div class="editor-actions">
            <button class="btn btn-secondary" (click)="onCancel()" [disabled]="isSaving">
              Cancel
            </button>
            <button class="btn btn-primary" (click)="onSave()" [disabled]="isSaving">
              {{ isSaving ? 'Saving...' : 'Save' }}
            </button>
          </div>
        </div>
      }
    </div>
  </div>
}
