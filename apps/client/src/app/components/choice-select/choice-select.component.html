@if (isVisible) {
  <div class="choice-container">
    <!-- Label at top -->
    <div class="choice-label" [innerHTML]="renderedLabel$ | async"></div>

    <!-- Button list -->
    <div
      class="choice-buttons"
      role="listbox"
      [attr.aria-activedescendant]="'choice-option-' + highlightedIndex"
      (keydown)="onKeyDown($event)"
      tabindex="0"
      #buttonContainer
    >
      @for (option of options; track option.value; let i = $index) {
        <button
          type="button"
          class="choice-button"
          [class.highlighted]="i === highlightedIndex"
          [disabled]="option.disabled"
          [id]="'choice-option-' + i"
          role="option"
          [attr.aria-selected]="i === highlightedIndex"
          (click)="onOptionClick(option.value)"
        >
          <span class="choice-button-label">{{ option.label }}</span>
          @if (i === highlightedIndex) {
            <mat-icon class="choice-button-icon">keyboard_return</mat-icon>
          }
        </button>
      }
    </div>

    <!-- Type-ahead indicator -->
    @if (searchText) {
      <div class="search-indicator">
        <mat-icon>search</mat-icon>
        <span>{{ searchText }}</span>
      </div>
    }
  </div>
}
