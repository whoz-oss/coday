<div class="options-container">
  <!-- Bouton pour ouvrir/fermer le panneau -->
  <button 
    class="options-toggle-btn"
    (click)="togglePanel()"
    [class.active]="isVisible"
    title="Options"
    type="button"
  >
    ‚öôÔ∏è
  </button>
  
  <!-- Backdrop pour fermer le panneau en cliquant √† l'ext√©rieur -->
  <div 
    *ngIf="isVisible"
    class="options-backdrop"
    (click)="onBackdropClick()"
  ></div>
  
  <!-- Panneau d'options -->
  <div 
    *ngIf="isVisible"
    class="options-panel"
    (click)="onPanelClick($event)"
  >
    <div class="options-header">
      <h3>Options</h3>
      <button 
        class="close-btn"
        (click)="closePanel()"
        title="Fermer"
        type="button"
      >
        ‚úï
      </button>
    </div>
    
    <div class="options-content">
      <!-- Comportement touche Entr√©e -->
      <div class="option-group">
        <label class="option-checkbox">
          <input 
            type="checkbox"
            [(ngModel)]="useEnterToSend"
            (change)="onEnterToSendChange()"
          />
          <span class="checkmark"></span>
          Utiliser Entr√©e pour envoyer (Shift+Entr√©e pour nouvelle ligne)
        </label>
      </div>
      
      <!-- S√©lection de langue vocale -->
      <div class="option-group">
        <label for="voice-language-select" class="option-label">
          Langue de reconnaissance vocale :
        </label>
        <select 
          id="voice-language-select"
          class="option-select"
          [(ngModel)]="selectedVoiceLanguage"
          (change)="onVoiceLanguageChange()"
        >
          <option 
            *ngFor="let option of voiceLanguageOptions" 
            [value]="option.code"
          >
            {{ option.flag }} {{ option.label }}
          </option>
        </select>
      </div>
      
      <!-- Section Synth√®se vocale -->
      <div class="option-section">
        <h4 class="section-title">üîä Synth√®se vocale</h4>
        
        <!-- Annonce automatique -->
        <div class="option-group">
          <label class="option-checkbox">
            <input 
              type="checkbox"
              [(ngModel)]="voiceAnnounceEnabled"
              (change)="onVoiceAnnounceEnabledChange()"
            />
            <span class="checkmark"></span>
            Annonce automatique des r√©ponses
          </label>
        </div>
        
        <!-- Mode vocal -->
        <div class="option-group">
          <label class="option-label">Mode vocal :</label>
          <div class="radio-group">
            <label class="option-radio">
              <input 
                type="radio" 
                name="voiceMode" 
                value="speech"
                [(ngModel)]="voiceMode"
                (change)="onVoiceModeChange()"
              />
              <span class="radio-mark"></span>
              üó£Ô∏è Synth√®se vocale
            </label>
            <label class="option-radio">
              <input 
                type="radio" 
                name="voiceMode" 
                value="notification"
                [(ngModel)]="voiceMode"
                (change)="onVoiceModeChange()"
              />
              <span class="radio-mark"></span>
              üîî Notification sonore
            </label>
          </div>
        </div>
        
        <!-- Lecture compl√®te -->
        <div class="option-group">
          <label class="option-checkbox">
            <input 
              type="checkbox"
              [(ngModel)]="voiceReadFullText"
              (change)="onVoiceReadFullTextChange()"
            />
            <span class="checkmark"></span>
            Lecture compl√®te des messages (sinon premiers paragraphes)
          </label>
        </div>
        
        <!-- S√©lection de voix -->
        <div class="option-group">
          <label for="voice-select" class="option-label">
            Voix s√©lectionn√©e :
          </label>
          <select 
            id="voice-select"
            class="option-select"
            [(ngModel)]="selectedVoiceId"
            (change)="onSelectedVoiceChange()"
            [disabled]="loadingVoices || availableVoices.length === 0"
          >
            <option value="" *ngIf="loadingVoices">üîÑ Chargement des voix...</option>
            <option value="" *ngIf="!loadingVoices && availableVoices.length === 0">‚ö†Ô∏è Aucune voix disponible</option>
            <option 
              *ngFor="let voice of availableVoices" 
              [value]="voice.name + '|' + voice.lang"
            >
              {{ voice.displayName }}
            </option>
          </select>
        </div>
        
        <!-- Volume -->
        <div class="option-group">
          <label for="voice-volume-slider" class="option-label">
            Volume : {{ voiceVolume }}%
          </label>
          <input 
            id="voice-volume-slider"
            type="range" 
            min="0" 
            max="100" 
            step="5"
            class="option-slider"
            [(ngModel)]="voiceVolume"
            (input)="onVoiceVolumeChange()"
          />
        </div>
        
        <!-- Vitesse -->
        <div class="option-group">
          <label for="voice-rate-slider" class="option-label">
            Vitesse : {{ voiceRate }}%
          </label>
          <input 
            id="voice-rate-slider"
            type="range" 
            min="50" 
            max="200" 
            step="10"
            class="option-slider"
            [(ngModel)]="voiceRate"
            (input)="onVoiceRateChange()"
          />
        </div>
        
        <!-- Test de la voix -->
        <div class="option-group">
          <button 
            type="button" 
            class="test-voice-btn"
            (click)="testVoice()"
            title="Tester la voix avec les param√®tres actuels"
          >
            üîä Tester la voix
          </button>
        </div>
      </div>
    </div>
  </div>
</div>